p8105_hw6_lg3450
================

first we load all necessary libraries:

``` r
library(tidyverse)
library(modelr)
library(broom)

set.seed(1)
```

# Problem1

**The Washington Post has gathered data on homicides in 50 large U.S.
cities and made the data available through a GitHub repository here. You
can read their accompanying article here.**

- **Q1.1: Create a city_state variable (e.g. “Baltimore, MD”), and a
  binary variable indicating whether the homicide is solved. Omit cities
  Dallas, TX; Phoenix, AZ; and Kansas City, MO – these don’t report
  victim race. Also omit Tulsa, AL – this is a data entry mistake. For
  this problem, limit your analysis those for whom victim_race is white
  or black. Be sure that victim_age is numeric.**

We first clean the dataset based on the requirements.

``` r
homicide_df = 
  read_csv("../homicide-data.csv") |>   
  mutate(
    # create city_state variable
    city_state = str_c(city, ", ", state),
    # add binary indicator
    resolved = as.numeric(disposition == "Closed by arrest"),
    # make victim_age numeric
    victim_age = as.numeric(victim_age)) |> 
  # omit 4 cities & limit analysis to White and Black
  filter(
    !city_state %in% c("Dallas, TX", "Phoenix, AZ", "Kansas City, MO", "Tulsa, AL"),
    victim_race %in% c("White", "Black"))
```

    ## Rows: 52179 Columns: 12
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## chr (9): uid, victim_last, victim_first, victim_race, victim_age, victim_sex...
    ## dbl (3): reported_date, lat, lon
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

- \*\*Q1.2: For the city of Baltimore, MD, use the glm function to fit a
  logistic regression with resolved vs unresolved as the outcome and
  victim age, sex and race as predictors.

Save the output of glm as an R object;

apply the broom::tidy to this object;

and obtain the estimate and confidence interval of the adjusted odds
ratio for solving homicides comparing male victims to female victims
keeping all other variables fixed.\*\*

- **Q1.3: Now run glm for each of the cities in your dataset, and
  extract the adjusted odds ratio (and CI) for solving homicides
  comparing male victims to female victims. Do this within a “tidy”
  pipeline, making use of purrr::map, list columns, and unnest as
  necessary to create a dataframe with estimated ORs and CIs for each
  city.**

- **Q1.4: Create a plot that shows the estimated ORs and CIs for each
  city. Organize cities according to estimated OR, and comment on the
  plot.**

# Problem2
